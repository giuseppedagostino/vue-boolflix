<!DOCTYPE html>
<html lang="it" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- axios -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.0/axios.js" integrity="sha512-bYkaBWaFtfPIMYt9+CX/4DWgfrjcHinjerNYxQmQx1VM76eUsPPKZa5zWV8KksVkBF/DaHSADCwil2J5Uq2ctA==" crossorigin="anonymous"></script>
    <!-- vue -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <!-- font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.css" integrity="sha512-f73UKwzP1Oia45eqHpHwzJtFLpvULbhVpEJfaWczo/ZCV5NWSnK4vLDnjTaMps28ocZ05RbI83k2RlQH92zy7A==" crossorigin="anonymous" />
    <!-- font -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- css -->
    <link rel="stylesheet" href="css/style.css">
    <title>vue-boolflix</title>
  </head>

  <body>
    <div id="root">
      <!-- header -->
      <header>
        <h1>boolflix</h1>
        <div>
          <input type="text" placeholder="Cerca" v-model="userQuery"  @keydown.enter="getAPI(); getTvShows()">
          <!-- ho usato il keyup perchè con il keydown non prende l'ultima lettera inserita -->
          <button type="button" @click="getAPI(); getTvShows()">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </header>
      <!-- /header -->

      <!-- main -->
      <main>
        <div class="card" v-for="(movie, index) in movies">
          <img v-if="movie.poster_path != null" :src="imgPrefix + movie.poster_path" :alt="movie.title">
          <!-- se non è presente la copertina, viene mostrata un'altra immagine tramite il v-if -->
          <img v-if="movie.poster_path == null" src="img/220x330.png" >

          <!-- titolo -->
          <div class="informations">
            <div class="p_container">
              <p><span>Titolo:</span>
                {{ movie.title }}
              </p>
            </div>

            <!-- titolo originale -->
            <!-- questo elemnto è visibile solo se il titolo è diverso da quello originale -->
            <div v-if="movie.title != movie.original_title" class="p_container">
              <p><span>Titolo originale:</span>
                {{ movie.original_title }}
              </p>
            </div>

            <!-- lingua -->
            <div class="p_container">
              <p><span>Lingua:</span>
                <img v-if="movie.original_language == 'en' " src="img/UK.png" :alt="movie.original_language">
                <img v-else-if="movie.original_language == 'it' " src="img/IT.png" :alt="movie.original_language">
                <img v-else-if="movie.original_language == 'de' " src="img/DE.png" :alt="movie.original_language">
                <img v-else-if="movie.original_language == 'fr' " src="img/FR.png" :alt="movie.original_language">
                <span v-else="" class="language_span">{{ movie.original_language }}</span>
              </p>
            </div>

            <!-- voto -->
            <div class="p_container">
              <p><span>Voto:</span>
                <!-- Nel primo v-for (quello dei movies) ho passato l'index perchè mi è utile in questo step per prelevare dall'array dei voti il numero di stelle corrispondenti al film -->
                <i v-for="n in arrayStarsNumber[index]" class="fas fa-star"></i><i v-for="n in (5 - arrayStarsNumber[index])" class="far fa-star"></i>
                <!-- le icone sono attaccate nell'html per evitare il fastidiosissimo spazietto nella pagina -->
              </p>
            </div>

            <!-- trama -->
            <div class="p_container">
              <p><span v-if="movie.overview != ''">Trama:</span>
                <p class="missing" v-if="movie.overview == ''">Purtroppo non è presente una descrizione in italiano per questo film.</p>
                {{ movie.overview }}
              </p>
            </div>

          </div>
        </div>

        <!-- questo h1 viene mostrato quando non è ancora stata effettuata nessuna ricerca -->
        <h1 v-if="movies.length == 0">Effettua una ricerca</h1>
      </main>
      <!-- /main -->
    </div>

    <!-- js -->
    <script src="js/main.js" charset="utf-8"></script>
  </body>
</html>
